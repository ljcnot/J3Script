LoadLib("Macro\\·â×°º¯Êı.lua")
local target
local tclass
local this_player
local gcdsj = 0.1 --gcdÊ±¼ä
local lastSelectTime = 0
local save_target
local isRun = false
local isDanger = false

function jiekong()
    if (GetSkillGCD("ÉúËÀ½Ù") + gcdsj) > dingshenTime() then
        return false
    end
    if (GetSkillGCD("ÉúËÀ½Ù") + gcdsj) > yunxuanTime() then
        return false
    end
    return true
end
function chirilun()
    ---³àÈÕÂÖ
    if dis() > 4 or isManri() then
        return false
    end
    return true
end

function lierizhan()
    ---ÁÒÈÕÕ¶
    if dis() > 4 or cdEX("ÁÒÈÕÕ¶") or isManri() or getSun() >= 80 then
        return false
    end

    return true
end
function youyuelun()
    ---ÓÄÔÂÂÖ
    if dis() > 4 or isManyue() then
        return false
    end
    return true
end

function yinyuezhan()
    ---ÒøÔÂÕ¶
    if dis() > 12 or cdEX("ÒøÔÂÕ¶") or isManyue() or ( getMoon() >= 80  and dis()<=4 )then
        return false
    end
    return true
end
function shengsijie()
    ---ÉúËÀ½Ù
    if dis() > 6 or GetCastCount(this_player, 3966, 10) >= 2 or (isManyue() == false and isManri() == false) or HaveTalent("ÓÄÒş³¾¼£") then
        return false
    end
    if haveMiankong() then
        return false
    end
    if death(target) and tnostate("³å´Ì") and tstate("»÷µ¹|Ñ£ÔÎ|¶¨Éí") == false and tstatep("Ãâ¿Ø") == false then
        return true
    end
    if death(target) and tnostate("³å´Ì") and tstate("Ñ£ÔÎ|¶¨Éí") and seeObj(target) > 0 and jiekong() and tstatep("Ãâ¿Ø") == false then
        return true
    end

    return false
end
function shengsijieJianliao()
    ---ÉúËÀ½Ù¼õÁÆ
    if dis() > 6 or (isManyue() == false and isManri() == false) then
        return false
    end
    if not tstatep("¼õÁÆ") or tbufftime("ÔÂ½Ù")<2 then
        return true
    end
    return false
end
function jingshipomoji()
    ---¾»ÊÀÆÆÄ§»÷
    if dis() > 15 or (isManyue() == false and isManri() == false) then
        return false
    end
    if isManri() and (not shengsijie() or HaveTalent("ÉÆ¶ñÈçÃÎ")==false) then
        return true
    end
    if isManyue() then
        return true
    end
    return false
end
function quyeduanchou()
    ---ÇıÒ¹¶Ï³î
    if dis() > 6 or cdEX("ÇıÒ¹¶Ï³î") or isManyue() or isManri() then
        return false
    end
    if buff("°µ³¾ÃÖÉ¢") or buff("°²³¾") then
        return true
    end
    return false
end
function buweianxing(weight)
    ---²ÀÎ·°µĞÌ
    if tclass==NPC or dis() > 6  or  noSkillTime(0.2) or cdEX("²ÀÎ·°µĞÌ") or tstatep("Ãâ½ÉĞµ") or tstatep("Ãâ·âÄÚ") then
        return false
    end
    --if weight<=8 and  kongzhiTimeEX(1) then
    --    if cdEX("²ÀÎ·°µĞÌ") and cdEX("ÉúÃğÓè¶á")==false then
    --        skillEX2("°µ³¾ÃÖÉ¢")
    --        skill("Á÷¹âÇôÓ°")
    --        skillEX2("ÉúÃğÓè¶á")
    --        --print("ÉúÃğ")
    --        return true
    --    end
    --    --print("½ÉĞµ1")
    --    return true
    --end
    if tbuff("ÂÒÈ÷ÇàºÉ") or tbuff("ĞÄÎŞÅÔæğ") then
        return true
    end

    if tlife() <= 50 then
        --if cdEX("²ÀÎ·°µĞÌ") and cdEX("ÉúÃğÓè¶á") == false then
        --    skillEX2("°µ³¾ÃÖÉ¢")
        --    skill("Á÷¹âÇôÓ°")
        --    skill("ÇıÒ¹¶Ï³î")
        --    skillEX2("ÉúÃğÓè¶á")
        --    --print("ÉúÃğ")
        --    return true
        --end
        return true
    end
    if tlife() <= 100 and (not IsInArena() or objOnHorse(target) or tmount("²¹Ìì¾÷|Àë¾­Ò×µÀ|ÏàÖª|ÔÆÉÑĞÄ¾­|Áèº£¾ö")) then
        return true
    end

    return false
end
function shengmieyuduo()
    ---ÉúÃğÓè¶á
    if cdEX("ÉúÃğÓè¶á") or noSkillTime(0.2) then
        return false
    end
    if tlife() <= 50 and cdEX("²ÀÎ·°µĞÌ") then
        return true
    end
    return false
end
function guangmingxiang(weight)
    ---¹âÃ÷Ïà
    if cdEX("¹âÃ÷Ïà") or buff("ÑïìºÉ³³¡") or dis() > 15 or isyueda() then
        return false
    end

    if weight <= 7 and (isManri() or isManyue()) then
        return true
    end
    if weight<=10 and quyeduanchou() and not cdEX("ÇıÒ¹¶Ï³î") then
        return true
    end
    return false
end
function fumingzhongsheng(weight)
    ---·üÃ÷ÖÚÉú
    if not HaveTalent("·üÃ÷ÖÚÉú") or buff("ÑïìºÉ³³¡") or cdEX("·üÃ÷ÖÚÉú") or getSun() < 60 or dis() > 6 then
        return false
    end
    if weight <= 10  then
        return true
    end
    --if weight <= 7 then
    --    return true
    --end
    return false
end
function mingyueduxin(weight)
    ---Ú¤ÔÂ¶ÉĞÄ
    if not HaveTalent("Ú¤ÔÂ¶ÉĞÄ") or buff("ÑïìºÉ³³¡") or isguangmingxiang() or cdEX("Ú¤ÔÂ¶ÉĞÄ") or getMoon() < 60 or dis() > 12 or buff("¹âÃ÷Ïà") then
        return false
    end
    if weight <= 10 then
        return true
    end
    return false
end
function hanyueyao()
    ---º®ÔÂÒ«
    if not HaveTalent("º®ÔÂÒ«") or cdEX("º®ÔÂÒ«") or dis() > 20 or tstatep("Ãâ·âÄÚ") or tstatep("Ãâ´ò¶Ï") then
        return false
    end
    if tIsota() then
        return true
    end
    if not tmount("Àë¾­Ò×µÀ|ÔÆÉÑĞÄ¾­|²¹Ìì¾÷|ÏàÖª") then
        local diduinaima = FindPlayer(20, "Àë¾­Ò×µÀ|ÔÆÉÑĞÄ¾­|²¹Ìì¾÷|ÏàÖª", "µĞ¶Ô")
        if diduinaima ~= nil and objIsota(diduinaima) then
            CastTo("º®ÔÂÒ«", diduinaima)
        end
    end
    return false
end
function liuguangqiuying(weight)
    ---Á÷¹âÇôÓ°
    if cdEX2("Á÷¹âÇôÓ°") or dis() > 20 or jileyin(weight) or tstate("³å´Ì") or GetSkillGCD("ÉúËÀ½Ù") > 0 or (GetCastTime(this_player, 18629) > 0 and GetCastTime(this_player, 18629) < 1) then
        --or (statep("Ãâ¿Ø") and not buff("°µ³¾ÃÖÉ¢"))
        return false
    end
    if dis() > 4 and (statep("Ëø×ã") or state("½©Ö±")) then
        return true
    end
    if dis() > 4 and dis() <= 15 and jingshipomoji() then
        return false
    end
    if dis() > 4 and dis() <= 12 and yinyuezhan() then
        return false
    end
    if dis() > 4 and dis() <= 6 and shengsijieJianliao() then
        return false
    end
    if dis() > 4 and dis() <= 6 and quyeduanchou() then
        return false
    end
    if dis() > 6 and dis() <= 12 and isyueda() and buff("°µ³¾ÃÖÉ¢") then
        return true
    end
    if dis() > 12 and his() <= 12 then
        return true
    end
    if dis() > 4 and his() <= 12  and not buff("ÁÒ»ğ")  then
        return true
    end
    if dis() > 8 and his() <= 12  and  buff("ÁÒ»ğ")  then
        return true
    end
    if seeObjEX(this_player)>=1 and not statep("Ãâ¿Ø") then
        return true
    end

    return false
end
function huanguangbu(weight)
    ---»Ã¹â²½
    if cdEX("»Ã¹â²½") or dis() > 20 or tstate("³å´Ì") or isyueda() or statep("Ãâ¿Ø") then
        return false
    end

    if dis() > 4 and dis() <= 12 and isyueda() then
        return false
    end
    if HaveTalent("ÃØÓ°¹îĞĞ") and  statep("½ÉĞµ") or statep("³ÁÄ¬") or statep("·âÄÚ") then
        return true
    end
    if HaveTalent("ÃØÓ°¹îĞĞ") and  state("Ñ£ÔÎ|¶¨Éí") then
        return true
    end
    if dis() > 4 and dis() <= 15 and jingshipomoji() then
        return false
    end
    --if dis()>4 and (isManri()==false and isManyue()==false and dis()<15) and cdEX2("Á÷¹âÇôÓ°") then
    --    return true
    --end
    if dis() > 4 and cdEX2("Á÷¹âÇôÓ°") and weight <= 5 then
        return true
    end

    return false
end
function jileyin(weight)
    ---¼«ÀÖÒı
    if not HaveTalent("¼«ÀÖÒı") or cdEX("¼«ÀÖÒı") or tstate("³å´Ì") or dis() > 14 then
        return false
    end
    if not tstatep("·âÇá¹¦") and weight<=4 then
        return true
    end
    if femgche(this_player, "¶ÓÓÑ") and target and not femgche(target, "¶ÓÓÑ") then
        return true
    end
    if femgche(this_player, "¶ÓÓÑ") and findRangeCount(14)>=2 then
        return true
    end
    if his() > 4 and weight<=5 then
        return true
    end
    if dis() > 6 and weight<=4 and not yinyuezhan() and not quyeduanchou() and not jingshipomoji() then
        return true
    end
    return false
end
function tanmoti()
    ---Ì°Ä§Ìå
    if cdEX2("Ì°Ä§Ìå") or buff("°µ³¾ÃÖÉ¢") or (GetCastTime(this_player, 18629) > 0 and GetCastTime(this_player, 18629) < 10) or buff("°µ³¾ÃÖÉ¢") or buff("°²³¾") then
        return false
    end
    if boom() >= 3 and life() <= 90 and statep("¼õÉË") == false then
        return true
    end
    if boom() >= 2 and life() <= 70 and statep("¼õÉË") == false then
        return true
    end
    local naima = FindPlayer(30, "Àë¾­Ò×µÀ|ÔÆÉÑĞÄ¾­|²¹Ìì¾÷|ÏàÖª", "¶ÓÓÑ")
    if life() < 60 and naima and statep("¼õÉË") == false then
        return true
    end
    if life() < 30 then
        return true
    end
    return false
end
function anchenmisan(weight)
    ---°µ³¾ÃÖÉ¢
    if cdEX("°µ³¾ÃÖÉ¢") then
        return false
    end
    if life() < 40 then
        return true
    end
    if isyueda() or statep("Ãâ¿Ø") then
        return false
    end
    if dis() > 4 and dis() <= 12 and isyueda() then
        return false
    end
    --if dis()<4 and weight<=3 and cdEX("Ú¤ÔÂ¶ÉĞÄ") and getSun()<60 and getMoon()<60 then
    --    return true
    --end
    if (statep("½ÉĞµ") or statep("³ÁÄ¬") or statep("·âÄÚ")) and cdEX("»Ã¹â²½") then
        return true
    end
    --if dis()>4 and (isManri()==false and isManyue()==false and dis()<15) and cdEX2("Á÷¹âÇôÓ°") then
    --    return true
    if state("Ñ£ÔÎ|¶¨Éí") and cdEX("»Ã¹â²½") then
        return true
    end
    if state("»÷µ¹") then
        return true
    end
    return false
end
function wuminghunsuo(weight)
    if cdEX("ÎŞÃ÷»êËø") then
        return false
    end
    if dis()<=8 and tmount("Àë¾­Ò×µÀ|ÔÆÉÑĞÄ¾­|²¹Ìì¾÷|ÏàÖª") and  tbuff("¼²µçß³Óğ") and not tstatep("Ãâ¿Ø")  then
        return true
    end
    if dis()<=8 and tmount("Àë¾­Ò×µÀ|ÔÆÉÑĞÄ¾­|²¹Ìì¾÷|ÏàÖª") and  femgche(target, "µĞ¶Ô") and  not tstatep("Ãâ¿Ø")  then
        return true
    end
    if dis()>4 and  his()>=4 and  dis()<=8 and not tstatep("Ãâ¿Ø") and not yinyuezhan() and not quyeduanchou() and not jingshipomoji()  then
        CastTo("ÎŞÃ÷»êËø", target, true)
    end

    if not tmount("Àë¾­Ò×µÀ|ÔÆÉÑĞÄ¾­|²¹Ìì¾÷|ÏàÖª") and weight <= 10 then
        local diduinaima = FindPlayer(8, "Àë¾­Ò×µÀ|ÔÆÉÑĞÄ¾­|²¹Ìì¾÷|ÏàÖª", "µĞ¶Ô")
        if diduinaima then
            CastTo("ÎŞÃ÷»êËø", diduinaima, true)
        end
    end
    if tmount("Àë¾­Ò×µÀ|ÔÆÉÑĞÄ¾­|²¹Ìì¾÷|ÏàÖª") and weight <= 10 then
        local nosee = findNoSeediren()
        if nosee then
            CastTo("ÎŞÃ÷»êËø", nosee, true)
        end
    end
end

function riling()
    ---ÔÜÈÕÁé
    if lierizhan() then
        skill("ÁÒÈÕÕ¶")
    end
    if chirilun() then
        skill("³àÈÕÂÖ")
    end
end

function yueling()
    ---ÔÜÔÂÁé
    if yinyuezhan() then
        skill("ÒøÔÂÕ¶")
    end
    if youyuelun() then
        skill("ÓÄÔÂÂÖ")
    end
end
function manri()
    ---ÂúÈÕÊä³ö
    --
    if  HaveTalent("ÉÆ¶ñÈçÃÎ") and shengsijieJianliao() then
        skillEX("ÉúËÀ½Ù")
    end
    if jingshipomoji() then
        skillEX("¾»ÊÀÆÆÄ§»÷")
    end
    if HaveTalent("ÉÆ¶ñÈçÃÎ") and shengsijie() then
        skillEX("ÉúËÀ½Ù")
    end
end
function manyue()

    if shengsijieJianliao() then
        skillEX("ÉúËÀ½Ù")
    end
    if jingshipomoji() then
        skillEX("¾»ÊÀÆÆÄ§»÷")
    end
    ---ÂúÔÂÊä³ö
    if shengsijie() then
        skillEX("ÉúËÀ½Ù")
    end
end
function yinshen()
    ---ÒşÉíÊä³ö
end
function DPS(weight)
    --Èç¹ûÑªÁ¿»ØÀ´ÁË¾ÍÈ¡ÏûÌ°Ä§Ìå
    --if buff("Ì°Ä§Ìå") and life()> 60 and weight<=3 and (getMoon()>=60 or getSun()>=60) then
    --    CancelBuff(mbuff, "Ì°Ä§Ìå")
    --end

    if jileyin(weight) then
        skillEX2("¼«ÀÖÒı")
    end

    if target and  not femgche(target, "µĞ¶Ô") and liuguangqiuying(weight) then
        skill("Á÷¹âÇôÓ°")
    end

    if buweianxing(weight) then
        skillEX("²ÀÎ·°µĞÌ")
    end

    if shengmieyuduo() then
        skillEX2("°µ³¾ÃÖÉ¢")
        skill("Á÷¹âÇôÓ°")
        skill("ÇıÒ¹¶Ï³î")
        skillEX2("ÉúÃğÓè¶á")
    end
    if guangmingxiang(weight) then
        Cast("¹âÃ÷Ïà", true, true)
    end
    if hanyueyao() then
        skill("º®ÔÂÒ«")
    end

    if fumingzhongsheng(weight) then
        skill("·üÃ÷ÖÚÉú")
    end
    if mingyueduxin(weight) then
        skill("Ú¤ÔÂ¶ÉĞÄ")
    end

    if isManyue() then
        manyue()
    else
        if isManri() then
            manri()
        end
    end
    if quyeduanchou() then
        skillEX("ÇıÒ¹¶Ï³î")
    end
    if (cdEX("ÁÒÈÕÕ¶") and getSun() < 80) or dis()>4 then
        yueling()
    else
        riling()
    end
    if cdEX("·öÒ¡Ö±ÉÏ") == false then
        Cast("·öÒ¡Ö±ÉÏ", true, true)
    end
end
function seurvival(weight)
    ---Éú´æÏò¼¼ÄÜ
    if tanmoti() then
        Cast(3973, true, true)
    end
    if anchenmisan(weight) then
        Cast("°µ³¾ÃÖÉ¢", true, true)
    end
    if target and  not femgche(target, "µĞ¶Ô") and  huanguangbu(weight) then
        skill("»Ã¹â²½")
    end


end



function tab(weight)
    if objState(target, "ÖØÉË") or tbuff("À×öªÕğÅ­") then
        findTargetforRange(30)
        --print("Ä¿±êÖØÉË")

    end
    --if target and IsParty(target) then
    --    if target ~= nil then
    --        SetTarget(save_target)
    --    end
    --else
    --    if target ~= nil then
    --        save_target = target
    --    end
    --end
    if target == nil and save_target ~= nil then
        SetTarget(save_target)
    end
    --if life() <=40 then
    --	local naima = FindPlayer(40, "Àë¾­Ò×µÀ|ÔÆÉÑĞÄ¾­|²¹Ìì¾÷|ÏàÖª", "¶ÓÓÑ")
    --	if naima and GetDist(naima)>6 then
    --		SetTarget(naima)
    --		help = true
    --	else
    --		if help then
    --			findTargetforRange(8)
    --			help = false
    --		end
    --	end
    --end
    if HaveTalent("º®ÔÂÒ«") and cdEX("º®ÔÂÒ«") == false then
        ---Èç¹ûÌ½Ã·Ã»CD ²¢ÇÒÄ¿±êÊÇµĞ¶Ô
        local target
        --±éÀú¶ÓÎé³ÉÔ±
        for k, v in ipairs(GetAllMember()) do
            if IsPlayer(v.dwID) and IsEnemy(v.dwID) and objState(v, "ÖØÉË") == false and GetDist(this_player, v) < 20 and IsVisible(this_player, v) and v ~= this_player and objNotWudi(v) then
                if objIsota(v) and (objmount(v, "²¹Ìì¾÷|Àë¾­Ò×µÀ|ÏàÖª|ÔÆÉÑĞÄ¾­") or not IsInArena() ) then
                    --ÏÈ±£´æµ±Ç°¶ÔÏó
                    CastTo("º®ÔÂÒ«", v, true)
                    --return 1
                end
            end
        end
    end
    --print("µ±Ç°Ä¿±êÊÇ·ñÊÇ¶ÓÓÑ",IsParty(target))
    --if cdEX("Ì½Ã·") and IsParty(target) and life() >40 then
    --	if save_target ~= nil then
    --		--»»»Ø±£´æµÄÄ¿±ê
    --		SetTarget(save_target)
    --		print("Ì½Ã·ÍêÁË,ÇĞ»ØÔ­À´Ä¿±ê")
    --
    --		return 1
    --	else
    --		findTarget(false)
    --	end
    --	print("Ì½Ã·ÍêÁË")
    --end
    -----ÉÏ´ÎÇĞ»»Ä¿±ê´óÓÚ5Ãë²Å»á»»Ä¿±ê
    if weight >= 50 and (GetTickCount() - lastSelectTime) > 5000 then
        print("Ä¿±ê¼õÉË¹ı¸ß")
        lastSelectTime = GetTickCount()
        findTarget(true)
    end
    --
    --if IsDangerArea(target, "µĞ¶Ô") and (GetTickCount() - lastSelectTime) > 5000 then
    --    print("Î£ÏÕÇøÓòÇĞ»»Ä¿±ê")
    --    lastSelectTime = GetTickCount()
    --    findTarget(true)
    --end
    if tlife() > 20 and not tmount("Àë¾­Ò×µÀ|ÔÆÉÑĞÄ¾­|²¹Ìì¾÷|ÏàÖª") then
        findTargetforHp(20)
    end
end

--Mainº¯Êı£¬1¸ö²ÎÊıÊÇ×Ô¼ºµÄÍæ¼Ò¶ÔÏó£¬Ã¿Ãëµ÷ÓÃ16´Î
function Main(player)
    this_player = player
    if player.bFightState == false then
        Cast("°µ³¾ÃÖÉ¢", true, true)
    end
    InteractNpc("ÒÅÊ§µÄ»õÎï")
    target,tclass = setAll(player)
    local weight = getWeight(false)

    if weight>3 and femgche(player, "µĞ¶Ô") then
        if target then
            if femgche(target, "µĞ¶Ô") then
                BackTo(target)
            else
                skill("Á÷¹âÇôÓ°")
            end
        end
        MoveForwardStart()
        if state("Ñ£ÔÎ|»÷µ¹|¶¨Éí") then
            Cast("°µ³¾ÃÖÉ¢", true, true)
        end
        Cast("·öÒ¡Ö±ÉÏ", true, true)
        Jump()
        Cast("õæÔÆÖğÔÂ", true, true)

        --Cast(3973, true, true)
    end

    --print("weight:",weight)
    tab(weight)
    seurvival(weight)
    if wuminghunsuo(weight) then
        skillEX("ÎŞÃ÷»êËø")
    end
    if target and  femgche(target, "µĞ¶Ô") then
        TurnTo(target)
        isDanger = true
        if isRun then
            MoveAction_StopAll()
            isRun=false
        end
    else
        isDanger = false
        if target then
            TurnTo(target)
            isRun= true
            MoveForwardStart()
            toBack()
        else
            if isRun then
                MoveAction_StopAll()
                isRun=false
            end
        end

    end
    if tbuff("¶ÜÁ¢") or tbuff("ÎŞÃ÷»êËø") or tbuff("À×öªÕğÅ­") then
        StopAction()
        return
    end
    --if ota("ÔÆ·ÉÓñ»Ê") then
    --    MoveAction_StopAll()
    --    return
    --end
    --¸úËæµ±Ç°Ä¿±ê




    if his() > 6 and buff("µ¯Ìø") then
        Jump()
    end
    if GetHeight(player) > 6 and dis() <= 4 then
        Jump()
    end
    if target and IsParty(target) then
        return
    end
    DPS(weight)
end

--end


--ÊÍ·Å¼¼ÄÜ»Øµ÷º¯Êı£¬ÈÎÒâ¶ÔÏóÊÍ·Å¼¼ÄÜÊ±µ÷ÓÃ
function OnCast(CasterID, dwSkillID, dwLevel, nPastFrame, tClass, tIDnX, nY, nZ)
    --CasterID ÊÍ·Å¼¼ÄÜµÄ½ÇÉ«ID
    --dwSkillID ¼¼ÄÜID
    --dwLevel ¼¼ÄÜµÈ¼¶
    --nPastFrame ´Ó·şÎñ¶Ë·¢³öµ½ÏÖÔÚÒÑ¹ıÈ¥µÄÖ¡Êı
    --tClass ¼¼ÄÜÊÍ·ÅµÄÄ¿±êÀàĞÍ(COORD, NPC, PLAYER)£¬Õâ¸öºÍ¼¼ÄÜÀàĞÍÓĞ¹Ø
    --tIDnX Èç¹ûÊÇĞèÒªÄ¿±êµÄ¼¼ÄÜ£¬Õâ¸öÊÇ¼¼ÄÜµÄÄ¿±êID£¬Èç¹ûÊÇĞèÒªÒ»¸öÎ»ÖÃÊÍ·ÅµÄ¼¼ÄÜ£¬Õâ¸öÊÇx×ø±ê
    --nY y×ø±ê£¬²»ÊÇ×ø±êÀàĞÍµÄ¼¼ÄÜÎŞĞ§
    --nZ z×ø±ê£¬²»ÊÇ×ø±êÀàĞÍµÄ¼¼ÄÜÎŞĞ§
    --±ÈÈçÓĞ¸ö¼¼ÄÜ123£¬ÀàËÆº³µØÖ®ÀàµÄ¼¼ÄÜ£¬ÆäÊµÊÇ¸ö¶ş¶Î¼¼ÄÜ£¬ÆğÌø£¬ÂäµØÖ®ºó²Å»áÔì³ÉÑ£ÔÎ
    --ÆğÌøµ½ÂäµØÓĞ8Ö¡£¨0.5Ãë£©£¬ÄãÏë¶ãÕâ¸ö¼¼ÄÜ£¨ÄôÔÆ£¬ºóÌøÊ²Ã´µÄ£©
    --local myid = GetMyID()
    --local skillList =
    --if dwSkillID == 123 and tIDnX == myid then  --Èç¹ûÊÇ¶ÔÎÒÊÍ·Å£¬Õâ¸öÊÇÆğÌø½×¶ÎµÄ¼¼ÄÜID
    --	--Èç¹û¹ıÈ¥µÄÖ¡ÊıĞ¡ÓÚ4£¬×Ü¹²8Ö¡£¬´óÓÚ4ËµÃ÷ÍøËÙÌ«²î£¬ÒÑ¾­¶ã²»µôÁË
    --	--ÕâÀïÉèÎª4Ö»ÊÇÑİÊ¾£¬ÊµÕ½ÖĞÒª×Ô¼º³¢ÊÔ
    --	if nPastFrame < 4 then
    --		Cast(9007)  --ºóÌø
    --	end
    --end

    --print(CasterID, dwSkillID, dwLevel, nPastFrame, tClass, tIDnX, nY, nZ)  --Êä³öÊÍ·ÅĞÅÏ¢
end


--¿ªÊ¼¶ÁÌõ»Øµ÷º¯Êı£¬ÈÎÒâ¶ÔÏó¿ªÊ¼¶ÁÌõÊ±µ÷ÓÃ
function OnPrepare(CasterID, dwSkillID, dwLevel, nLeftFrame, tClass, tIDnX, nY, nZ)

end